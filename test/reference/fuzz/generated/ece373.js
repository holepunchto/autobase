const test = require('brittle')
const { Linearizer, Writer } = require('../../')

test('fuzz ece373', function (t) {
  const a = new Writer('a')
  const b = new Writer('b')
  const c = new Writer('c')
  const d = new Writer('d')
  const e = new Writer('e')
  const l = new Linearizer([a, b, c, d, e])


  const nodes = []

    const e0 = e.add()
    nodes.push(e0)
    const d0 = d.add(e0)
    nodes.push(d0)
    const a0 = a.add(d0)
    nodes.push(a0)
    const c0 = c.add()
    nodes.push(c0)
    const d1 = d.add(c0, d0)
    nodes.push(d1)
    const c1 = c.add(d1, a0)
    nodes.push(c1)
    const e1 = e.add(c1)
    nodes.push(e1)
    const c2 = c.add(e1)
    nodes.push(c2)
    const b0 = b.add()
    nodes.push(b0)
    const d2 = d.add(c2)
    nodes.push(d2)
    const e2 = e.add(c2, b0, d2)
    nodes.push(e2)
    const c3 = c.add(e2)
    nodes.push(c3)
    const d3 = d.add(c3)
    nodes.push(d3)
    const e3 = e.add(c3)
    nodes.push(e3)
    const c4 = c.add(d3, e3)
    nodes.push(c4)
    const b1 = b.add(c4)
    nodes.push(b1)
    const c5 = c.add(b1)
    nodes.push(c5)
    const a1 = a.add(c5)
    nodes.push(a1)
    const b2 = b.add(a1)
    nodes.push(b2)
    const e4 = e.add(b2)
    nodes.push(e4)
    const c6 = c.add(b2)
    nodes.push(c6)
    const d4 = d.add(e4, c6)
    nodes.push(d4)
    const e5 = e.add(d4)
    nodes.push(e5)
    const d5 = d.add(e5)
    nodes.push(d5)
    const c7 = c.add(e4, c6)
    nodes.push(c7)
    const a2 = a.add(d5, c7)
    nodes.push(a2)
    const b3 = b.add(a2)
    nodes.push(b3)
    const e6 = e.add(a2)
    nodes.push(e6)
    const c8 = c.add(e6)
    nodes.push(c8)
    const b4 = b.add(e6, b3)
    nodes.push(b4)
    const c9 = c.add(b4, c8)
    nodes.push(c9)
    const a3 = a.add(c9)
    nodes.push(a3)
    const c10 = c.add(a3)
    nodes.push(c10)
    const b5 = b.add(c10)
    nodes.push(b5)
    const a4 = a.add(b5)
    nodes.push(a4)
    const b6 = b.add(a4)
    nodes.push(b6)
    const c11 = c.add(b6)
    nodes.push(c11)
    const b7 = b.add(c11)
    nodes.push(b7)
    const a5 = a.add(c11)
    nodes.push(a5)
    const b8 = b.add(b7, a5)
    nodes.push(b8)
    const a6 = a.add(b8)
    nodes.push(a6)
    const b9 = b.add(a6)
    nodes.push(b9)
    const c12 = c.add(b9)
    nodes.push(c12)
    const a7 = a.add(b9)
    nodes.push(a7)
    const a8 = a.add(c12, a7)
    nodes.push(a8)
    const b10 = b.add(a8)
    nodes.push(b10)
    const a9 = a.add(b10)
    nodes.push(a9)
    const b11 = b.add(a9)
    nodes.push(b11)
    const c13 = c.add(a9)
    nodes.push(c13)
    const c14 = c.add(b11, c13)
    nodes.push(c14)
    const a10 = a.add(c14)
    nodes.push(a10)
    const b12 = b.add(a10)
    nodes.push(b12)
    const a11 = a.add(b12)
    nodes.push(a11)
    const c15 = c.add(a11)
    nodes.push(c15)
    const a12 = a.add(c15)
    nodes.push(a12)
    const b13 = b.add(a12)
    nodes.push(b13)
    const c16 = c.add(b13)
    nodes.push(c16)
    const a13 = a.add(c16)
    nodes.push(a13)
    const c17 = c.add(a13)
    nodes.push(c17)
    const a14 = a.add(c17)
    nodes.push(a14)
    const c18 = c.add(a14)
    nodes.push(c18)
    const a15 = a.add(c18)
    nodes.push(a15)
    const c19 = c.add(a15)
    nodes.push(c19)
    const a16 = a.add(c19)
    nodes.push(a16)
    const b14 = b.add(a14)
    nodes.push(b14)
    const a17 = a.add(a16, b14)
    nodes.push(a17)
    const b15 = b.add(a17)
    nodes.push(b15)
    const c20 = c.add(a16, b14)
    nodes.push(c20)
    const b16 = b.add(b15, c20)
    nodes.push(b16)
    const c21 = c.add(b16)
    nodes.push(c21)
    const a18 = a.add(c21)
    nodes.push(a18)
    const c22 = c.add(a18)
    nodes.push(c22)
    const a19 = a.add(c22)
    nodes.push(a19)
    const b17 = b.add(c22)
    nodes.push(b17)
    const b18 = b.add(a19, b17)
    nodes.push(b18)
    const c23 = c.add(b18)
    nodes.push(c23)
    const b19 = b.add(c23)
    nodes.push(b19)
    const a20 = a.add(b19)
    nodes.push(a20)
    const c24 = c.add(a20)
    nodes.push(c24)
    const b20 = b.add(c24)
    nodes.push(b20)
    const c25 = c.add(b20)
    nodes.push(c25)
    const b21 = b.add(c25)
    nodes.push(b21)
    const c26 = c.add(b21)
    nodes.push(c26)
    const b22 = b.add(c26)
    nodes.push(b22)
    const a21 = a.add(b22)
    nodes.push(a21)
    const b23 = b.add(a21)
    nodes.push(b23)
    const c27 = c.add(b23)
    nodes.push(c27)
    const a22 = a.add(c27)
    nodes.push(a22)
    const c28 = c.add(a22)
    nodes.push(c28)
    const b24 = b.add(c28)
    nodes.push(b24)
    const a23 = a.add(b24)
    nodes.push(a23)
    const c29 = c.add(a23)
    nodes.push(c29)
    const a24 = a.add(c29)
    nodes.push(a24)
    const b25 = b.add(a24)
    nodes.push(b25)
    const c30 = c.add(b25)
    nodes.push(c30)
    const a25 = a.add(c30)
    nodes.push(a25)
    const b26 = b.add(a25)
    nodes.push(b26)
    const c31 = c.add(b26)
    nodes.push(c31)
    const a26 = a.add(c31)
    nodes.push(a26)
    const b27 = b.add(a26)
    nodes.push(b27)
    const a27 = a.add(b27)
    nodes.push(a27)
    const b28 = b.add(a27)
    nodes.push(b28)
    const a28 = a.add(b28)
    nodes.push(a28)
    const b29 = b.add(a28)
    nodes.push(b29)
    const c32 = c.add(b29)
    nodes.push(c32)
    const b30 = b.add(c32)
    nodes.push(b30)
    const a29 = a.add(b29)
    nodes.push(a29)
    const a30 = a.add(b30, a29)
    nodes.push(a30)
    const b31 = b.add(a30)
    nodes.push(b31)
    const c33 = c.add(b31)
    nodes.push(c33)
    const b32 = b.add(c33)
    nodes.push(b32)
    const c34 = c.add(b32)
    nodes.push(c34)
    const b33 = b.add(c34)
    nodes.push(b33)
    const a31 = a.add(b33)
    nodes.push(a31)
    const b34 = b.add(a31)
    nodes.push(b34)
    const a32 = a.add(b34)
    nodes.push(a32)
    const b35 = b.add(a32)
    nodes.push(b35)
    const a33 = a.add(b35)
    nodes.push(a33)
    const c35 = c.add(a33)
    nodes.push(c35)
    const a34 = a.add(c35)
    nodes.push(a34)
    const b36 = b.add(a34)
    nodes.push(b36)
    const a35 = a.add(b36)
    nodes.push(a35)
    const c36 = c.add(b36)
    nodes.push(c36)
    const b37 = b.add(a35, c36)
    nodes.push(b37)
    const c37 = c.add(b37)
    nodes.push(c37)
    const a36 = a.add(c37)
    nodes.push(a36)
    const c38 = c.add(a36)
    nodes.push(c38)
    const b38 = b.add(c38)
    nodes.push(b38)
    const c39 = c.add(b38)
    nodes.push(c39)
    const b39 = b.add(c39)
    nodes.push(b39)
    const c40 = c.add(b39)
    nodes.push(c40)
    const b40 = b.add(c40)
    nodes.push(b40)
    const a37 = a.add(b40)
    nodes.push(a37)
    const b41 = b.add(a37)
    nodes.push(b41)
    const c41 = c.add(b41)
    nodes.push(c41)
    const a38 = a.add(c41)
    nodes.push(a38)
    const c42 = c.add(a38)
    nodes.push(c42)
    const a39 = a.add(c42)
    nodes.push(a39)
    const c43 = c.add(a39)
    nodes.push(c43)
    const a40 = a.add(c43)
    nodes.push(a40)
    const c44 = c.add(a40)
    nodes.push(c44)
    const a41 = a.add(c44)
    nodes.push(a41)
    const b42 = b.add(a40)
    nodes.push(b42)
    const b43 = b.add(a41, b42)
    nodes.push(b43)
    const c45 = c.add(b43)
    nodes.push(c45)
    const b44 = b.add(c45)
    nodes.push(b44)
    const a42 = a.add(b43)
    nodes.push(a42)
    const c46 = c.add(b44, a42)
    nodes.push(c46)
    const b45 = b.add(c46)
    nodes.push(b45)
    const c47 = c.add(b45)
    nodes.push(c47)
    const b46 = b.add(c47)
    nodes.push(b46)
    const c48 = c.add(b46)
    nodes.push(c48)
    const b47 = b.add(c48)
    nodes.push(b47)
    const a43 = a.add(b47)
    nodes.push(a43)
    const b48 = b.add(a43)
    nodes.push(b48)
    const c49 = c.add(b48)
    nodes.push(c49)
    const a44 = a.add(c49)
    nodes.push(a44)
    const c50 = c.add(a44)
    nodes.push(c50)
    const b49 = b.add(c50)
    nodes.push(b49)
    const a45 = a.add(b49)
    nodes.push(a45)
    const b50 = b.add(a45)
    nodes.push(b50)
    const c51 = c.add(b50)
    nodes.push(c51)
    const b51 = b.add(c51)
    nodes.push(b51)
    const a46 = a.add(b51)
    nodes.push(a46)
    const c52 = c.add(a46)
    nodes.push(c52)
    const b52 = b.add(c52)
    nodes.push(b52)
    const c53 = c.add(b52)
    nodes.push(c53)
    const a47 = a.add(c53)
    nodes.push(a47)
    const c54 = c.add(a47)
    nodes.push(c54)
    const a48 = a.add(c54)
    nodes.push(a48)
    const b53 = b.add(a48)
    nodes.push(b53)
    const c55 = c.add(b53)
    nodes.push(c55)
    const b54 = b.add(c55)
    nodes.push(b54)
    const c56 = c.add(b54)
    nodes.push(c56)
    const a49 = a.add(c56)
    nodes.push(a49)
    const c57 = c.add(a49)
    nodes.push(c57)
    const b55 = b.add(c57)
    nodes.push(b55)
    const a50 = a.add(b55)
    nodes.push(a50)
    const b56 = b.add(a50)
    nodes.push(b56)
    const a51 = a.add(b56)
    nodes.push(a51)
    const c58 = c.add(a51)
    nodes.push(c58)
    const b57 = b.add(c58)
    nodes.push(b57)
    const a52 = a.add(c58)
    nodes.push(a52)
    const c59 = c.add(b57, a52)
    nodes.push(c59)
    const a53 = a.add(c59)
    nodes.push(a53)
    const b58 = b.add(a53)
    nodes.push(b58)
    const c60 = c.add(b58)
    nodes.push(c60)
    const b59 = b.add(c60)
    nodes.push(b59)
    const c61 = c.add(b59)
    nodes.push(c61)
    const b60 = b.add(c61)
    nodes.push(b60)
    const a54 = a.add(b59)
    nodes.push(a54)
    const c62 = c.add(a54, c61)
    nodes.push(c62)
    const c63 = c.add(b60, c62)
    nodes.push(c63)
    const b61 = b.add(b60, c62)
    nodes.push(b61)
    const c64 = c.add(c63, b61)
    nodes.push(c64)
    const a55 = a.add(b61)
    nodes.push(a55)
    const c65 = c.add(c64, a55)
    nodes.push(c65)
    const b62 = b.add(c65)
    nodes.push(b62)
    const a56 = a.add(b62)
    nodes.push(a56)
    const b63 = b.add(a56)
    nodes.push(b63)
    const a57 = a.add(b63)
    nodes.push(a57)
    const c66 = c.add(a57)
    nodes.push(c66)
    const b64 = b.add(c66)
    nodes.push(b64)
    const c67 = c.add(b64)
    nodes.push(c67)
    const a58 = a.add(c67)
    nodes.push(a58)
    const b65 = b.add(a58)
    nodes.push(b65)
    const a59 = a.add(b65)
    nodes.push(a59)
    const b66 = b.add(a59)
    nodes.push(b66)
    const c68 = c.add(b66)
    nodes.push(c68)
    const a60 = a.add(c68)
    nodes.push(a60)
    const c69 = c.add(a60)
    nodes.push(c69)
    const b67 = b.add(c69)
    nodes.push(b67)
    const a61 = a.add(b67)
    nodes.push(a61)
    const c70 = c.add(b67)
    nodes.push(c70)
    const b68 = b.add(a61, c70)
    nodes.push(b68)
    const c71 = c.add(b68)
    nodes.push(c71)
    const b69 = b.add(c71)
    nodes.push(b69)
    const c72 = c.add(b69)
    nodes.push(c72)
    const a62 = a.add(c72)
    nodes.push(a62)
    const b70 = b.add(a62)
    nodes.push(b70)
    const a63 = a.add(b70)
    nodes.push(a63)
    const b71 = b.add(a63)
    nodes.push(b71)
    const c73 = c.add(b71)
    nodes.push(c73)
    const b72 = b.add(c73)
    nodes.push(b72)
    const a64 = a.add(b72)
    nodes.push(a64)
    const c74 = c.add(a64)
    nodes.push(c74)
    const b73 = b.add(c74)
    nodes.push(b73)
    const c75 = c.add(b73)
    nodes.push(c75)
    const a65 = a.add(c75)
    nodes.push(a65)
    const b74 = b.add(a65)
    nodes.push(b74)
    const a66 = a.add(b74)
    nodes.push(a66)
    const b75 = b.add(a66)
    nodes.push(b75)
    const c76 = c.add(b74)
    nodes.push(c76)
    const a67 = a.add(c76, a66)
    nodes.push(a67)
    const b76 = b.add(a67, b75)
    nodes.push(b76)
    const c77 = c.add(b76)
    nodes.push(c77)
    const a68 = a.add(c77)
    nodes.push(a68)
    const b77 = b.add(c77)
    nodes.push(b77)
    const c78 = c.add(a68)
    nodes.push(c78)
    const a69 = a.add(b77, a68)
    nodes.push(a69)


  let length
  let pos = 0
  while (true) {
    while (pos < pos + 30) {
      if (++pos >= 240) return t.end()
      l.addHead(nodes.shift())
    }

    const result = []
    while (true) {
      const n = l.shift()
      result.push(n)
      if (!n) break
      t.comment('yield #' + tick + ', ' + ref1)
    }

    t.not(length, result.length, 'loop ' + i)
  }
})